<div id="stock-lookup">
	<h3> Search for Stock </h3>
	<%= form_tag search_stocks_path, remote: true, method: :get, id: "stock-lookup-form" do %>
	<div class="form-group row text-center col-md-12">
		<div class="col-md-10">
		<%= text_field_tag :stock, params[:stock], placeholder: "Stock ticker symbol", autofocus: true, class: 'form-control search-box input-lg' %>
		</div>
		<div class="col-md-2">
		 	<%= button_tag(type: :submit, class: "btn btn-lg btn-success") do %>
		 		<i class="fa fa-search"></i> Look up a stock!
		 	<% end %>
		</div>
	</div> 
	<% end %>
	<%= render 'common/spinner' %>
	<% if @stock %>
		<div id="stock-lookup-results" class="well results-block">
		 <strong>Symbol: </strong> <%= @stock.ticker %>
		 <strong>Symbol: </strong> <%= @stock.name %>
		 <strong>Symbol: </strong> <%= @stock.price %>
		 <% if current_user.can_add_stock?(@stock.ticker) %>

		 	<%= link_to "Add to my stocks", user_stocks_path(user: current_user, stock_ticker: @stock.ticker, stock_id: @stock.id ? @stock.id : ''), class: 'btn btn-xs btn-success', method: :post %>
		 <% else %>
		 <br>
		 	<span class="label label-default">
		 	
		 		Stock cannot be added due to: 
		 		<% if !current_user.under_stock_limit? && current_user.stock_already_added?(@stock.ticker) %>
		 			stocks being more than 10 and the stock is already in your list.
		 		<% elsif !current_user.under_stock_limit? %>
		 			stocks being more than 10.
		 		<% else %>
		 			the stock already being in your list.
		 		<% end %>
		 	</span>
		 <% end %>
		</div>  
	<% end %>
	<div id="stock-lookup-errors"></div>
</div> 